<!-- Login Screen -->
<div class="login-container" *ngIf="!isLoggedIn">
  <div class="login-card">
    <div class="login-header">
      <h1>KPI ダッシュボード</h1>
      <p>ログインしてください</p>
    </div>
    <form class="login-form" (ngSubmit)="login()">
      <div class="form-group">
        <label for="username">ユーザー名</label>
        <input type="text" id="username" [(ngModel)]="loginForm.username" name="username" placeholder="ユーザー名を入力" />
      </div>
      <div class="form-group">
        <label for="password">パスワード</label>
        <input type="password" id="password" [(ngModel)]="loginForm.password" name="password" placeholder="パスワードを入力" />
      </div>
      <div class="login-error" *ngIf="loginError">{{loginError}}</div>
      <button type="submit" class="login-btn">ログイン</button>
    </form>
    <div class="login-hint">
      <p>サンプルアカウント:</p>
      <p>管理者: admin / admin123</p>
      <p>一般ユーザー: user / user123</p>
    </div>
  </div>
</div>

<!-- Main Dashboard (after login) -->
<div class="dashboard" *ngIf="isLoggedIn">
  <header class="header">
    <div class="header-top">
      <h1>KPI ダッシュボード</h1>
      <p class="subtitle">AI活用状況・人材育成進捗レポート</p>
      <div class="user-info">
        <span class="user-name">{{currentUser?.username}}</span>
        <span class="user-role" [class.admin]="isAdmin()">{{isAdmin() ? '管理者' : '一般ユーザー'}}</span>
        <button class="logout-btn" (click)="logout()">ログアウト</button>
      </div>
    </div>
    <nav class="header-nav">
      <button [class.active]="currentView === 'dashboard'" (click)="currentView = 'dashboard'">ダッシュボード</button>
      <button [class.active]="currentView === 'company'" (click)="currentView = 'company'">会社紹介</button>
      <button [class.active]="currentView === 'study'" (click)="currentView = 'study'">勉強会コンテンツ</button>
      <button *ngIf="isAdmin()" [class.active]="currentView === 'data'" (click)="currentView = 'data'">データ管理</button>
      <button [class.active]="currentView === 'contact'" (click)="currentView = 'contact'; resetContactForm()">相談窓口</button>
    </nav>
  </header>

  <div class="dashboard-grid" *ngIf="currentView === 'dashboard'">
    <!-- Section 1: GAI利用状況 -->
    <section class="card">
      <div class="card-header">
        <h2>GAI利用状況</h2>
      </div>
      <div class="card-content">
        <div class="chart-container">
          <h3>コアユーザ数の月別推移（3部署）</h3>
          <ngx-charts-line-chart
            [results]="coreUserData"
            [scheme]="colorScheme"
            [xAxis]="true"
            [yAxis]="true"
            [legend]="true"
            [showXAxisLabel]="true"
            [showYAxisLabel]="true"
            xAxisLabel="月"
            yAxisLabel="ユーザ数"
            [autoScale]="true"
            [view]="[500, 280]">
          </ngx-charts-line-chart>
        </div>
        <div class="chart-container">
          <h3>利用用途ごとの回数</h3>
          <ngx-charts-bar-horizontal
            [results]="usagePurposeData"
            [scheme]="colorScheme"
            [xAxis]="true"
            [yAxis]="true"
            [showXAxisLabel]="true"
            [showYAxisLabel]="true"
            xAxisLabel="回数"
            yAxisLabel="用途"
            [view]="[500, 280]">
          </ngx-charts-bar-horizontal>
        </div>
      </div>
    </section>

    <!-- Section 2: AI支援状況 -->
    <section class="card">
      <div class="card-header">
        <h2>AI支援状況</h2>
      </div>
      <div class="card-content">
        <div class="sub-section">
          <h3>案件数比較（受託 vs 全量）</h3>
          <div class="ai-support-cards">
            <div class="ai-support-card">
              <div class="ai-support-card-header">PoC</div>
              <div class="ai-support-card-body">
                <div class="progress-bar-container">
                  <div class="progress-bar-label">
                    <span>受託案件</span>
                    <span class="progress-value">{{editData.aiSupport.poc.contracted}}件</span>
                  </div>
                  <div class="progress-bar-track">
                    <div class="progress-bar-fill" [style.width.%]="getPocContractedRatio()"></div>
                  </div>
                </div>
                <div class="progress-bar-container">
                  <div class="progress-bar-label">
                    <span>全量案件</span>
                    <span class="progress-value">{{editData.aiSupport.poc.total}}件</span>
                  </div>
                  <div class="progress-bar-track full">
                    <div class="progress-bar-fill-light" style="width: 100%"></div>
                  </div>
                </div>
                <div class="ratio-display">
                  <span class="ratio-label">受託率</span>
                  <span class="ratio-value">{{getPocContractedRatio()}}%</span>
                </div>
              </div>
            </div>
            <div class="ai-support-card">
              <div class="ai-support-card-header">本番</div>
              <div class="ai-support-card-body">
                <div class="progress-bar-container">
                  <div class="progress-bar-label">
                    <span>受託案件</span>
                    <span class="progress-value">{{editData.aiSupport.production.contracted}}件</span>
                  </div>
                  <div class="progress-bar-track">
                    <div class="progress-bar-fill" [style.width.%]="getProductionContractedRatio()"></div>
                  </div>
                </div>
                <div class="progress-bar-container">
                  <div class="progress-bar-label">
                    <span>全量案件</span>
                    <span class="progress-value">{{editData.aiSupport.production.total}}件</span>
                  </div>
                  <div class="progress-bar-track full">
                    <div class="progress-bar-fill-light" style="width: 100%"></div>
                  </div>
                </div>
                <div class="ratio-display">
                  <span class="ratio-label">受託率</span>
                  <span class="ratio-value">{{getProductionContractedRatio()}}%</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="sub-section">
          <h3>発注金額比較</h3>
          <div class="amount-comparison">
            <div class="amount-table">
              <div class="amount-row header">
                <div class="amount-cell"></div>
                <div class="amount-cell">受託金額</div>
                <div class="amount-cell">全量金額</div>
                <div class="amount-cell">受託率</div>
              </div>
              <div class="amount-row">
                <div class="amount-cell label">PoC</div>
                <div class="amount-cell value">{{formatYen(editData.aiSupport.amount.poc.contracted)}}</div>
                <div class="amount-cell value">{{formatYen(editData.aiSupport.amount.poc.total)}}</div>
                <div class="amount-cell ratio">{{getPocAmountRatio()}}%</div>
              </div>
              <div class="amount-row">
                <div class="amount-cell label">本番</div>
                <div class="amount-cell value">{{formatYen(editData.aiSupport.amount.production.contracted)}}</div>
                <div class="amount-cell value">{{formatYen(editData.aiSupport.amount.production.total)}}</div>
                <div class="amount-cell ratio">{{getProductionAmountRatio()}}%</div>
              </div>
              <div class="amount-row total">
                <div class="amount-cell label">合計</div>
                <div class="amount-cell value">{{formatYen(getTotalContractedAmount())}}</div>
                <div class="amount-cell value">{{formatYen(getTotalAmount())}}</div>
                <div class="amount-cell ratio">{{getTotalAmountRatio()}}%</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 3: 学習・検証環境の利用状況 -->
    <section class="card">
      <div class="card-header">
        <h2>学習・検証環境の利用状況</h2>
      </div>
      <div class="card-content">
        <div class="metrics-row">
          <div class="metric-card">
            <div class="metric-value">{{editData.learningEnv.departments}}</div>
            <div class="metric-label">利用部署数</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">{{editData.learningEnv.users}}</div>
            <div class="metric-label">登録者数</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">{{formatYen(editData.learningEnv.totalCost)}}</div>
            <div class="metric-label">累計利用金額</div>
          </div>
        </div>
        <div class="chart-container">
          <h3>月別利用金額推移</h3>
          <ngx-charts-area-chart
            [results]="[{name: '利用金額', series: learningEnvCostData}]"
            [scheme]="colorScheme"
            [xAxis]="true"
            [yAxis]="true"
            [showXAxisLabel]="true"
            [showYAxisLabel]="true"
            xAxisLabel="月"
            yAxisLabel="金額"
            [yAxisTickFormatting]="yAxisTickFormatting"
            [autoScale]="true"
            [view]="[500, 250]">
          </ngx-charts-area-chart>
        </div>
      </div>
    </section>

    <!-- Section 4: 人材育成進捗状況 -->
    <section class="card">
      <div class="card-header">
        <h2>人材育成進捗状況</h2>
      </div>
      <div class="card-content">
        <div class="hr-progress-grid">
          <div class="hr-progress-card">
            <div class="hr-progress-header">
              <h3>見習い認定</h3>
              <div class="hr-progress-percentage">{{apprenticeData.percentage}}%</div>
            </div>
            <div class="hr-progress-bar-wrapper">
              <div class="hr-progress-bar-track">
                <div class="hr-progress-bar-fill" [style.width.%]="apprenticeData.percentage"></div>
              </div>
            </div>
            <div class="hr-progress-details">
              <div class="hr-progress-detail">
                <span class="detail-number">{{apprenticeData.certified}}</span>
                <span class="detail-label">認定者数</span>
              </div>
              <div class="hr-progress-divider">/</div>
              <div class="hr-progress-detail">
                <span class="detail-number">{{apprenticeData.total}}</span>
                <span class="detail-label">対象者数</span>
              </div>
            </div>
          </div>
          <div class="hr-progress-card">
            <div class="hr-progress-header">
              <h3>独り立ち認定</h3>
              <div class="hr-progress-percentage">{{independentData.percentage}}%</div>
            </div>
            <div class="hr-progress-bar-wrapper">
              <div class="hr-progress-bar-track">
                <div class="hr-progress-bar-fill" [style.width.%]="independentData.percentage"></div>
              </div>
            </div>
            <div class="hr-progress-details">
              <div class="hr-progress-detail">
                <span class="detail-number">{{independentData.certified}}</span>
                <span class="detail-label">認定者数</span>
              </div>
              <div class="hr-progress-divider">/</div>
              <div class="hr-progress-detail">
                <span class="detail-number">{{independentData.total}}</span>
                <span class="detail-label">対象者数</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <footer class="footer" *ngIf="currentView === 'dashboard'">
    <p>最終更新: 2025年12月</p>
  </footer>

  <!-- Company Introduction Page -->
  <div class="company-page" *ngIf="currentView === 'company'">
    <section class="company-hero">
      <div class="company-hero-content">
        <h2>私たちについて</h2>
        <p class="company-tagline">テクノロジーで、未来を創る</p>
      </div>
    </section>

    <section class="company-section company-mission">
      <div class="company-container">
        <h3 class="section-title">ミッション</h3>
        <p class="mission-text">
          私たちは、最先端のAI技術を活用し、お客様のビジネス変革を支援します。
          デジタルトランスフォーメーションを通じて、持続可能な社会の実現に貢献することを使命としています。
        </p>
      </div>
    </section>

    <section class="company-section company-values">
      <div class="company-container">
        <h3 class="section-title">バリュー</h3>
        <div class="values-grid">
          <div class="value-card">
            <div class="value-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
              </svg>
            </div>
            <h4>イノベーション</h4>
            <p>常に新しい技術と手法を探求し、革新的なソリューションを提供します</p>
          </div>
          <div class="value-card">
            <div class="value-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
              </svg>
            </div>
            <h4>チームワーク</h4>
            <p>多様な専門性を持つメンバーが協力し、最高の成果を生み出します</p>
          </div>
          <div class="value-card">
            <div class="value-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
              </svg>
            </div>
            <h4>品質</h4>
            <p>妥協のない品質基準で、信頼性の高いサービスを提供します</p>
          </div>
          <div class="value-card">
            <div class="value-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 6v6l4 2"/>
              </svg>
            </div>
            <h4>スピード</h4>
            <p>迅速な対応と効率的な実行で、ビジネスの成長を加速させます</p>
          </div>
        </div>
      </div>
    </section>

    <section class="company-section company-services">
      <div class="company-container">
        <h3 class="section-title">サービス</h3>
        <div class="services-grid">
          <div class="service-card">
            <div class="service-image service-image-1"></div>
            <div class="service-content">
              <h4>AI導入支援</h4>
              <p>生成AIを活用した業務効率化、自動化ソリューションの企画から導入までをトータルサポート</p>
            </div>
          </div>
          <div class="service-card">
            <div class="service-image service-image-2"></div>
            <div class="service-content">
              <h4>DXコンサルティング</h4>
              <p>デジタル戦略の策定から実行まで、お客様のDX推進を包括的に支援</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="company-section company-numbers">
      <div class="company-container">
        <h3 class="section-title">数字で見る私たち</h3>
        <div class="numbers-grid">
          <div class="number-item">
            <span class="number-value">500+</span>
            <span class="number-label">プロジェクト実績</span>
          </div>
          <div class="number-item">
            <span class="number-value">98%</span>
            <span class="number-label">顧客満足度</span>
          </div>
          <div class="number-item">
            <span class="number-value">150+</span>
            <span class="number-label">専門スタッフ</span>
          </div>
          <div class="number-item">
            <span class="number-value">10+</span>
            <span class="number-label">年の実績</span>
          </div>
        </div>
      </div>
    </section>

    <section class="company-section company-cta">
      <div class="company-container">
        <h3>お気軽にご相談ください</h3>
        <p>AI活用やDX推進についてのご相談を承っております</p>
        <button class="cta-button" (click)="currentView = 'contact'; resetContactForm()">相談窓口へ</button>
      </div>
    </section>
  </div>

  <!-- Study Content Page -->
  <div class="study-page" *ngIf="currentView === 'study'">
    <section class="study-hero">
      <div class="study-hero-content">
        <h2>AI勉強会コンテンツ</h2>
        <p class="study-subtitle">生成AI活用のための学習コンテンツをご用意しています</p>
      </div>
    </section>

    <section class="study-section">
      <div class="study-container">
        <h3 class="study-section-title">入門編</h3>
        <p class="study-section-desc">生成AIの基礎知識と活用方法を学びます</p>
        <div class="video-grid">
          <div class="video-card">
            <div class="video-wrapper">
              <iframe 
                src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
                title="生成AI入門 - 基礎概念と仕組み"
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen>
              </iframe>
            </div>
            <div class="video-info">
              <h4>生成AI入門 - 基礎概念と仕組み</h4>
              <p class="video-meta">約30分 | 初級</p>
              <p class="video-desc">生成AIとは何か、その仕組みと可能性について解説します</p>
            </div>
          </div>
          <div class="video-card">
            <div class="video-wrapper">
              <iframe 
                src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
                title="プロンプトエンジニアリング基礎"
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen>
              </iframe>
            </div>
            <div class="video-info">
              <h4>プロンプトエンジニアリング基礎</h4>
              <p class="video-meta">約45分 | 初級</p>
              <p class="video-desc">効果的なプロンプトの書き方と基本テクニックを学びます</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="study-section study-section-alt">
      <div class="study-container">
        <h3 class="study-section-title">実践編</h3>
        <p class="study-section-desc">業務での具体的な活用方法を学びます</p>
        <div class="video-grid">
          <div class="video-card">
            <div class="video-wrapper">
              <iframe 
                src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
                title="業務効率化のためのAI活用"
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen>
              </iframe>
            </div>
            <div class="video-info">
              <h4>業務効率化のためのAI活用</h4>
              <p class="video-meta">約60分 | 中級</p>
              <p class="video-desc">文書作成、データ分析、コード生成など実務での活用事例を紹介</p>
            </div>
          </div>
          <div class="video-card">
            <div class="video-wrapper">
              <iframe 
                src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
                title="AIツール比較と選定ガイド"
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen>
              </iframe>
            </div>
            <div class="video-info">
              <h4>AIツール比較と選定ガイド</h4>
              <p class="video-meta">約40分 | 中級</p>
              <p class="video-desc">主要なAIツールの特徴と用途に応じた選び方を解説</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="study-section">
      <div class="study-container">
        <h3 class="study-section-title">応用編</h3>
        <p class="study-section-desc">より高度な活用方法とシステム連携を学びます</p>
        <div class="video-grid">
          <div class="video-card">
            <div class="video-wrapper">
              <iframe 
                src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
                title="API連携とシステム統合"
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen>
              </iframe>
            </div>
            <div class="video-info">
              <h4>API連携とシステム統合</h4>
              <p class="video-meta">約90分 | 上級</p>
              <p class="video-desc">生成AIをシステムに組み込む方法とベストプラクティス</p>
            </div>
          </div>
          <div class="video-card">
            <div class="video-wrapper">
              <iframe 
                src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
                title="セキュリティとガバナンス"
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen>
              </iframe>
            </div>
            <div class="video-info">
              <h4>セキュリティとガバナンス</h4>
              <p class="video-meta">約50分 | 上級</p>
              <p class="video-desc">企業でのAI利用におけるセキュリティ対策とルール策定</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="study-section study-cta">
      <div class="study-container">
        <h3>個別の研修・勉強会のご相談</h3>
        <p>部署やチーム向けのカスタマイズ研修も承っております</p>
        <button class="cta-button" (click)="currentView = 'contact'; resetContactForm()">相談窓口へ</button>
      </div>
    </section>
  </div>

  <!-- Data Management Page -->
  <div class="data-page" *ngIf="currentView === 'data'">
    <section class="data-hero">
      <div class="data-hero-content">
        <h2>データ管理</h2>
        <p class="data-subtitle">ダッシュボードのデータを編集・管理します</p>
      </div>
    </section>

    <section class="data-section">
      <div class="data-container">
        <div class="data-tabs">
          <button [class.active]="activeTab === 'gai'" (click)="activeTab = 'gai'">GAI利用状況</button>
          <button [class.active]="activeTab === 'ai'" (click)="activeTab = 'ai'">AI支援状況</button>
          <button [class.active]="activeTab === 'learning'" (click)="activeTab = 'learning'">学習・検証環境</button>
          <button [class.active]="activeTab === 'hr'" (click)="activeTab = 'hr'">人材育成</button>
        </div>

        <div class="data-content">
          <!-- GAI利用状況 Tab -->
          <div *ngIf="activeTab === 'gai'" class="tab-content">
            <h3>利用用途ごとの回数</h3>
            <div class="form-grid">
              <div class="form-row" *ngFor="let item of editData.gaiUsage.usagePurpose; let i = index">
                <label>{{item.name}}</label>
                <input type="number" [(ngModel)]="editData.gaiUsage.usagePurpose[i].value" />
              </div>
            </div>
          </div>
          
          <!-- AI支援状況 Tab -->
          <div *ngIf="activeTab === 'ai'" class="tab-content">
            <h3>案件数</h3>
            <div class="form-section">
              <h4>PoC</h4>
              <div class="form-row">
                <label>受託案件数</label>
                <input type="number" [(ngModel)]="editData.aiSupport.poc.contracted" />
              </div>
              <div class="form-row">
                <label>全量案件数</label>
                <input type="number" [(ngModel)]="editData.aiSupport.poc.total" />
              </div>
            </div>
            <div class="form-section">
              <h4>本番</h4>
              <div class="form-row">
                <label>受託案件数</label>
                <input type="number" [(ngModel)]="editData.aiSupport.production.contracted" />
              </div>
              <div class="form-row">
                <label>全量案件数</label>
                <input type="number" [(ngModel)]="editData.aiSupport.production.total" />
              </div>
            </div>
            <h3>発注金額（円）</h3>
            <div class="form-section">
              <h4>PoC</h4>
              <div class="form-row">
                <label>受託金額</label>
                <input type="number" [(ngModel)]="editData.aiSupport.amount.poc.contracted" />
              </div>
              <div class="form-row">
                <label>全量金額</label>
                <input type="number" [(ngModel)]="editData.aiSupport.amount.poc.total" />
              </div>
            </div>
            <div class="form-section">
              <h4>本番</h4>
              <div class="form-row">
                <label>受託金額</label>
                <input type="number" [(ngModel)]="editData.aiSupport.amount.production.contracted" />
              </div>
              <div class="form-row">
                <label>全量金額</label>
                <input type="number" [(ngModel)]="editData.aiSupport.amount.production.total" />
              </div>
            </div>
          </div>
          
          <!-- 学習・検証環境 Tab -->
          <div *ngIf="activeTab === 'learning'" class="tab-content">
            <h3>基本情報</h3>
            <div class="form-row">
              <label>利用部署数</label>
              <input type="number" [(ngModel)]="editData.learningEnv.departments" />
            </div>
            <div class="form-row">
              <label>登録者数</label>
              <input type="number" [(ngModel)]="editData.learningEnv.users" />
            </div>
            <div class="form-row">
              <label>累計利用金額（円）</label>
              <input type="number" [(ngModel)]="editData.learningEnv.totalCost" />
            </div>
          </div>
          
          <!-- 人材育成 Tab -->
          <div *ngIf="activeTab === 'hr'" class="tab-content">
            <h3>見習い認定</h3>
            <div class="form-row">
              <label>認定者数</label>
              <input type="number" [(ngModel)]="editData.hrDevelopment.apprentice.certified" />
            </div>
            <div class="form-row">
              <label>対象者数</label>
              <input type="number" [(ngModel)]="editData.hrDevelopment.apprentice.total" />
            </div>
            <h3>独り立ち認定</h3>
            <div class="form-row">
              <label>認定者数</label>
              <input type="number" [(ngModel)]="editData.hrDevelopment.independent.certified" />
            </div>
            <div class="form-row">
              <label>対象者数</label>
              <input type="number" [(ngModel)]="editData.hrDevelopment.independent.total" />
            </div>
          </div>
        </div>

        <div class="data-actions">
          <div class="data-actions-left">
            <button class="btn-secondary" (click)="exportData()">エクスポート</button>
            <label class="btn-secondary file-input-label">
              インポート
              <input type="file" accept=".json" (change)="importData($event)" hidden />
            </label>
            <button class="btn-danger" (click)="resetData()">リセット</button>
          </div>
          <div class="data-actions-right">
            <button class="btn-primary" (click)="saveData()">保存</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Contact Form Page -->
  <div class="contact-page" *ngIf="currentView === 'contact'">
    <section class="contact-hero">
      <div class="contact-hero-content">
        <h2>相談窓口</h2>
        <p class="contact-subtitle">生成AI活用に関するご相談を受け付けています</p>
      </div>
    </section>

    <section class="contact-section" *ngIf="!formSubmitted">
      <div class="contact-container">
        <div class="contact-info">
          <h3>ご相談について</h3>
          <p>生成AI活用に関する企画段階からのご相談に対応しています。お気軽にお問い合わせください。</p>
          <ul class="contact-features">
            <li>企画段階からの相談対応</li>
            <li>技術的なアドバイス</li>
            <li>PoC支援の検討</li>
            <li>適切な部署への橋渡し</li>
          </ul>
        </div>

        <form class="contact-form" (ngSubmit)="submitContactForm()">
          <div class="form-error" *ngIf="formError">{{formError}}</div>
          
          <div class="form-group">
            <label for="name">氏名 <span class="required">*</span></label>
            <input type="text" id="name" [(ngModel)]="contactForm.name" name="name" placeholder="山田 太郎">
          </div>

          <div class="form-group">
            <label for="department">部署 <span class="required">*</span></label>
            <input type="text" id="department" [(ngModel)]="contactForm.department" name="department" placeholder="システム開発部">
          </div>

          <div class="form-group">
            <label for="email">メールアドレス <span class="required">*</span></label>
            <input type="email" id="email" [(ngModel)]="contactForm.email" name="email" placeholder="yamada@example.com">
          </div>

          <div class="form-group">
            <label for="consultationType">相談種別 <span class="required">*</span></label>
            <select id="consultationType" [(ngModel)]="contactForm.consultationType" name="consultationType">
              <option value="">選択してください</option>
              <option value="planning">企画相談</option>
              <option value="technical">技術相談</option>
              <option value="poc">PoC支援依頼</option>
              <option value="training">研修・育成相談</option>
              <option value="other">その他</option>
            </select>
          </div>

          <div class="form-group">
            <label for="content">相談内容 <span class="required">*</span></label>
            <textarea id="content" [(ngModel)]="contactForm.content" name="content" rows="6" placeholder="ご相談内容をご記入ください"></textarea>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-submit">送信する</button>
          </div>
        </form>
      </div>
    </section>

    <section class="contact-section contact-success" *ngIf="formSubmitted">
      <div class="contact-container">
        <div class="success-content">
          <div class="success-icon">&#10003;</div>
          <h3>送信完了</h3>
          <p>お問い合わせありがとうございます。<br>担当者より折り返しご連絡いたします。</p>
          <div class="submitted-info">
            <h4>送信内容</h4>
            <dl>
              <dt>氏名</dt>
              <dd>{{contactForm.name}}</dd>
              <dt>部署</dt>
              <dd>{{contactForm.department}}</dd>
              <dt>メールアドレス</dt>
              <dd>{{contactForm.email}}</dd>
              <dt>相談種別</dt>
              <dd>{{contactForm.consultationType === 'planning' ? '企画相談' : contactForm.consultationType === 'technical' ? '技術相談' : contactForm.consultationType === 'poc' ? 'PoC支援依頼' : contactForm.consultationType === 'training' ? '研修・育成相談' : 'その他'}}</dd>
              <dt>相談内容</dt>
              <dd>{{contactForm.content}}</dd>
            </dl>
          </div>
          <button class="btn-back" (click)="resetContactForm()">新しい相談を送信</button>
        </div>
      </div>
    </section>
  </div>
</div>
